###练习0

本实验对应的OS原理的知识点:
```
1.first-fit连续物理内存分配算法:
	练习1中要求实现该算法
2.页目录表、页表的结构
	练习2中要求寻找虚拟地址对应的页表项，可能需要修改和查找页目录表
3.虚拟地址、线性地址和物理地址的概念
```

###练习1

设计实现过程
```
建立一个有序的物理内存块链表，从低地址到高地址排序
alloc:
	1.如果剩余的空闲内存小于所需的大小，返回NULL
	2.按列表从小到大查找空闲块，如果空闲块大小大于等于所需，就分配，如果有剩余，就分成两块
free:
	1.把内存块插入freelist，并相应地修改flag，property等
	2.检查前后的空闲内存块，如果地址相连，就结合
```

进一步的改进空间：
```
	free的时候会往前查找，直到查找到上一个连续空闲块的起始块为止，可以在之前查找插入空闲块位置的时候就把上一个连续空闲块起始块记录下来，提高效率。
```

###练习2

设计实现过程
```
根据给定的la，找到相应pde的地址，
如果这一项不存在：
	创建一个页表
    做相应的处理：页表置0，页目录表项设为->存在，可读写
    返回结果
否则：
	直接根据pde内容，找到pte的地址返回
```

如果出现了页访问异常，CPU会把产生异常的线性地址存储在CR2中，并且把errorCode保存在中断栈中。CPU保存程序现场，即压入EFLAGS,CS,EIP,errCode,把异常中断号0xE对应的中断服务例程的地址加载到CS和EIP寄存器中，开始执行中断服务例程。

如果再次出现页访问异常，

###练习3

执行过程
```
根据pte得到所对应的页
页ref减1
若ref等于0，释放物理内存
清空pte
使tlb无效
```

问题一，
不一定每一项都有对应
被分配的Page会有一个对应的页表项和页目录表项

问题二，
如果希望虚拟地址与物理地址相等
将KERNBASE设为0
